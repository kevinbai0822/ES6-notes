# ES6学习笔记

## 字符串的扩展
### 字符的Unicode表示法
javascript允许采用`\uxxxx`形式表示一个字符，其中`xxxx`表示字符的码点。但是这种表示法只限于`\u0000-\uFFFF`之间的字符,超出这个范围的，必须使用2个双字节形式表达。ES6对此作出了改进，只要将码点放在一个大括号里面，就能正确解读该字符。

### codePointAt()
对于四个字节的字符(Unicode码点大于0xFFFF的字符)，javascript不能正确处理，字符串长度会被误判为2，并且charAt方法无法读取整个字符，charCodeAt只能返回前2个字节和后2个字节的值。ES提供了codePointAt方法，能够正确处理4个字节存储的字符，返回一个字符的码点。

### 字符串的遍历器接口
ES6为字符串添加了遍历器接口，使字符串可以由`for...of`循环遍历。
```
for (let codePoint of 'leo'){
    console.log(codePoint);
}
```

### includes(), startsWith(), endsWith()
传统上，javascript只有indexOf方法可以用来确定一个字符串是否包含在另一个字符串中，ES6提供了新的三种方法：
- includes(): 返回布尔值，表示是否找到了参数字符串。
- startsWith(): 返回布尔值，表示参数字符串是否在源字符串的头部。
- endsWith(): 返回布尔值，表示参数字符串是否在源字符串的尾部。
这3种方法都支持第2个参数，表示开始搜索的位置。

### repeat()
repeat()返回一个新字符串，表示将源字符串重复n次。
参数如果是小数，会被取整。参数如果是负数或是Infinity，将会报错。参数如果是NaN，等用于0。参数如果是字符串，会先转换成数字。

### 模板字符串
传统的javascript输出字模板通常是:
```
$('.result').append(
    "this is <b>"+ leo.count + "</b>"+
    "items in your basket"
);
```
ES6则引入了模板字符串来解决:
```
$('.result').append(
    `this is <b>${leo.count}</b>items in your basket`
);
```
- 模板字符串是增强版的字符串，使用反引号(`)标识。它可以用作普通字符串，也可以用来定义多行字符串，或者在字符串中嵌入变量。
- 如果要在模板字符串中使用反引号，需要使用反斜杠(\)进行转义
- 如果模板字符串是多行，所有的空格和缩进都会被保留在输出中
- 在模板字符串中嵌入变量，需将变量名现在${}中，大括号内可以放入任意的javascript表达式，可以进行运算，以及引用对象属性。
- 模板字符串中还能调用函数
- 如果大括号中的值不是字符串，会按照一般的规则转为字符串。
- 如果模板字符串中的变量没有声明，将会报错。
### 标签模板
模板字符串可以紧跟在一个函数名后面，该函数将被调用来处理这个模板字符串，这杯成为'标签模板'功能。
```
var a = 2;
var b = 3;

function tag(s,v1,v2){
    console.log(s[0]);
    console.log(s[1]);
    console.log(s[2]);
    console.log(v1);
    console.log(v2);
}

tag`Hello ${a+b} world ${a*b}`;
```
有上面的例子可以看出，tag函数的第一个参数是一个数组，该数组的成员是那些没有变量替换的部分，也就是说，变量替换只发生在数组的第一个成员和第二个成员之间，以此类推。